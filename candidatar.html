<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>TidyNow</title>
    <link rel="icon" type="image/png" href="https://cdn.discordapp.com/attachments/1152183585546178571/1184138897471578193/letter-td-dt-initials-simple-lines-minimal-minimalist-modern-monogram-vector-logo-design_216988-1649.png?ex=658ae249&is=65786d49&hm=c533ccd11a9545b830ab7c6b64560328d2055d6b9bc1ed0f3f17b6e62d2aecf6&">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap">
    <link href="../lib/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../lib/font-awesome/dist/css/font-awesome.min.css" rel="stylesheet" />
    <link rel="stylesheet" href=" https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
    <style>
        #cabeçalho {
            backdrop-filter: blur(55px);
            background-color: rgba(135, 206, 250, 0.2);
        }

        #rodape {
            background: linear-gradient(to bottom, #05013f, #040a22);
            color: whitesmoke;
        }

        body {
            margin-top: 60px;
            color: #000;
            overflow-x: hidden;
            height: 100%;
            background-image: url("https://images.unsplash.com/photo-1517483000871-1dbf64a6e1c6?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Nnx8Ymx1ZSUyMGFuZCUyMHdoaXRlfGVufDB8fDB8fHww");
            background-repeat: no-repeat;
            background-size: 100% 100%
        }

        .card {
            padding: 30px 40px;
            margin-top: 60px;
            margin-bottom: 60px;
            border: none !important;
            box-shadow: 0 6px 12px 0 rgba(0,0,0,0.2)
        }

        .blue-text {
            color: #00BCD4
        }

        .form-control-label {
            margin-bottom: 0
        }

        input, textarea, button {
            padding: 8px 15px;
            border-radius: 5px !important;
            margin: 5px 0px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            font-size: 18px !important;
            font-weight: 300
        }

            input:focus, textarea:focus {
                -moz-box-shadow: none !important;
                -webkit-box-shadow: none !important;
                box-shadow: none !important;
                border: 1px solid #00BCD4;
                outline-width: 0;
                font-weight: 400
            }

        .btn-block {
            text-transform: uppercase;
            font-size: 15px !important;
            font-weight: 400;
            height: 43px;
            cursor: pointer
        }

            .btn-block:hover {
                color: #3f77df !important
            }

        button:focus {
            -moz-box-shadow: none !important;
            -webkit-box-shadow: none !important;
            box-shadow: none !important;
            outline-width: 0
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <nav id="cabeçalho" class="navbar navbar-expand-lg fixed-top">
        <div class="container">
            <a class="navbar-brand" href="index.html" tabindex="TidyNow"><img src="https://cdn.discordapp.com/attachments/1152183585546178571/1189350056848007178/instagram_profile_image-removebg-preview.png?ex=659dd78e&is=658b628e&hm=51a462ee33fbf1a26c7940889924c7e48ad5bb1d287acddfd683829eead5e5d2&" height="60" style="border: none;" /></a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item"><a class="nav-link" aria-current="page" href="sobre.html"><i class="fa fa-book text-primary"></i> Quem Somos</a></li>
                    <li class="nav-item"><a class="nav-link" aria-current="page" href="serviços.html"><i class="fa fa-handshake-o text-danger"></i> Serviços</a></li>

                </ul>
                <ul class="navbar-nav justify-content-end">
                    <li class="nav-item dropstart" id="loginLink">
                        <a class="nav-link" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-user-circle text-danger"></i> Conta
                        </a>
                        <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <a class="dropdown-item" href="login.html">Entrar como Utilizador</a>
                            <a class="dropdown-item" href="login-ps.html">Entrar como Prestador de Serviços</a>
                        </div>
                    </li>
                    <li class="nav-item" id="logoutLink" style="display: none;"><a class="nav-link" aria-current="page" href="#" onclick="handleLogout()"><i class="fa fa-sign-out text-danger"></i> Log out</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="container-fluid px-1 py-5 mx-auto">
            <div class="row d-flex justify-content-center">
                <div class="col-xl-7 col-lg-8 col-md-9 col-11 text-center">
                    <h3>Candidatura</h3>
                    <p class="blue-text">Pede já a tua licensa<br> para prestador de serviços na TidyNow.</p>
                    <div class="card">
                        <h5 class="text-center mb-4">Powering world-class companies</h5>
                        <form class="form-card" onsubmit="event.preventDefault()">
                            <div class="row justify-content-between text-left">
                                <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Primeiro Nome<span class="text-danger"> *</span></label> <input type="text" id="fname" name="fname" placeholder="Enter your first name" onblur="validate(1)"> </div>
                                <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Último Nome<span class="text-danger"> *</span></label> <input type="text" id="lname" name="lname" placeholder="Enter your last name" onblur="validate(2)"> </div>
                            </div>
                            <div class="row justify-content-between text-left">
                                <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Email<span class="text-danger"> *</span></label> <input type="text" id="email" name="email" placeholder="" onblur="validate(3)"> </div>
                                <div class="form-group col-sm-6 flex-column d-flex"> <label class="form-control-label px-3">Telemóvel<span class="text-danger"> *</span></label> <input type="text" id="mob" name="mob" placeholder="" onblur="validate(4)"> </div>
                            </div>
                            <div class="row justify-content-between text-left">
                                <div class="form-group col-12 flex-column d-flex"> <label class="form-control-label px-3">Quais são as suas motivações para se tornar num membro da TidyNow?<span class="text-danger"> *</span></label> <input type="text" id="ans" name="ans" placeholder="" onblur="validate(5)"> </div>
                            </div>
                            <div class="row justify-content-center">
                                <div class="form-group col-sm-6"> <button type="submit" class="btn-block btn-primary">Candidatar</button> </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <nav id="rodape" class="navbar navbar-expand-lg">
        <div class="container mt-3">
            <div class="col-md-6 mb-3">
                <div>Estamos aqui para tornar o seu espaço impecável. Dúvidas? Entre em contato conosco. A sua satisfação é a nossa prioridade!</div>
                <br />
                <div style="font-size:15px;">
                    <div><i class="fa fa-phone">  +351 9XX XXX XXX</i></div>
                    <div><i class="fa fa-envelope">  tiddynow@example.com</i></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="">
                    <br />
                    <br />
                    <div>Dias úteis - 7h às 22h<br />Fins de semana e feriados - 9h às 20h</div>
                </div>
            </div>
        </div>
    </nav>
    <script>
        function validate(val) {
            // Função de validação conforme seu código original
        }

        document.addEventListener("DOMContentLoaded", function () {
            // Adiciona um ouvinte de evento para o formulário
            const form = document.querySelector('.form-card');
            form.addEventListener('submit', function (event) {
                event.preventDefault(); // Impede o envio padrão do formulário

                // Obtém os valores dos campos
                const firstName = document.getElementById("fname").value;
                const lastName = document.getElementById("lname").value;
                const email = document.getElementById("email").value;
                const phone = document.getElementById("mob").value;

                // Obtém o usuário logado da Local Storage
                const userDetails = JSON.parse(localStorage.getItem('userDetails'));

                // Verifica se os parâmetros coincidem com algum usuário
                const matchedUser = userDetails.find(user => user.firstName === firstName &&
                    user.lastName === lastName &&
                    user.email === email &&
                    user.phone === phone);

                if (matchedUser) {
                    // Gera um código aleatório de 10 dígitos
                    const generatedCode = Math.floor(1000000000 + Math.random() * 9000000000);

                    // Adiciona o código gerado ao usuário
                    matchedUser.code = generatedCode;

                    // Atualiza a Local Storage com os detalhes do usuário atualizado
                    localStorage.setItem('userDetails', JSON.stringify(userDetails));

                    // Exibe uma mensagem com o código gerado
                    alert('Este é o seu código: ' + generatedCode);
                } else {
                    // Se os parâmetros não coincidirem com nenhum usuário
                    alert('Usuário não encontrado. Por favor, verifique os detalhes e tente novamente.');
                }
            });
        });
    </script>


</body>
</html>